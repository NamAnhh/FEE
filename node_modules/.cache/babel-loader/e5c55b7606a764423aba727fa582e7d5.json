{"ast":null,"code":"import _objectSpread from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\src\\\\components\\\\CMS\\\\Book\\\\EditBook\\\\index.js\";\nimport React from 'react';\nimport { Row, Col, Avatar, Form, Input, Radio, Select, Button, Divider } from \"antd\";\nimport moment from 'moment';\nimport \"antd/dist/antd.css\";\nimport styles from './styles';\nimport { _validnumber } from '../../../helpers/index';\nimport { url } from '../../../../API/url';\nimport { token } from '../../../../API/token';\nimport \"./styles.css\";\nvar TextArea = Input.TextArea;\nvar Option = Select.Option;\n\nvar EditBook =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditBook, _React$Component);\n\n  function EditBook(props) {\n    var _this;\n\n    _classCallCheck(this, EditBook);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditBook).call(this, props));\n\n    _this.handleChangeName = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          name: event.target.value\n        })\n      });\n    };\n\n    _this.handleChangeTitle = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          title: event.target.value\n        })\n      });\n    };\n\n    _this.handleChangeImage = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          image: event.target.value\n        })\n      });\n    };\n\n    _this.handleChangePrice = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          price: event.target.value\n        })\n      });\n    };\n\n    _this.handleChangeQuantity = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          quantity: event.target.value\n        })\n      });\n    };\n\n    _this.handleChangeBookList = function (value) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          bookList: value\n        })\n      });\n    };\n\n    _this.handleChangeStatus = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          status: event.target.value\n        })\n      });\n    };\n\n    _this.handleChangeComment = function (event) {\n      _this.setState({\n        book: _objectSpread({}, _this.state.book, {\n          comment: event.target.value\n        })\n      });\n    };\n\n    _this.fetchCategories = function () {\n      fetch(url + 'categories', {\n        method: 'get',\n        headers: {\n          \"Authorization\": token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        return _this.setState({\n          categories: data.data\n        }), console.log('get category API ', _this.state.categories);\n      });\n    };\n\n    _this.fetchSelectedBook = function () {\n      var selectedBook = _this.props.history.location.state.props.selectedBook;\n      console.log('selectedBook', selectedBook);\n\n      _this.setState({\n        book: {\n          name: selectedBook.name,\n          title: selectedBook.title,\n          image: selectedBook.image,\n          price: selectedBook.price,\n          status: selectedBook.status,\n          quantity: selectedBook.quantity,\n          comment: selectedBook.comment,\n          bookList: selectedBook.bookList[0]._id\n        }\n      });\n    };\n\n    _this.handleCancel = function () {\n      _this.props.history.push('/books');\n    };\n\n    _this.handleSubmit = function () {\n      var book = _this.state.book;\n      var selectedBook = _this.props.history.location.state.props.selectedBook;\n\n      if (book.name !== '') {\n        fetch(url + 'books/' + selectedBook._id, {\n          method: 'put',\n          body: JSON.stringify(book),\n          headers: {\n            \"Authorization\": token,\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (response) {\n          response.json();\n\n          if (response.status == 200) {\n            alert('Sửa thành công');\n\n            _this.props.history.push('/books');\n          }\n        });\n      } else {\n        alert('Vui lòng nhập đầy đủ thông tin');\n      }\n    };\n\n    _this.state = {\n      book: {\n        name: \"\",\n        title: \"\",\n        image: \"\",\n        price: \"\",\n        status: \"\",\n        quantity: \"\",\n        comment: \"\",\n        bookList: []\n      },\n      categories: []\n    };\n    return _this;\n  }\n\n  _createClass(EditBook, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchSelectedBook();\n      this.fetchCategories();\n    } //mapping categories to input select\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          categories = _this$state.categories,\n          _this$state$book = _this$state.book,\n          name = _this$state$book.name,\n          title = _this$state$book.title,\n          image = _this$state$book.image,\n          price = _this$state$book.price,\n          status = _this$state$book.status,\n          quantity = _this$state$book.quantity,\n          comment = _this$state$book.comment,\n          bookList = _this$state$book.bookList;\n      var categoryList = categories.map(function (data, index) {\n        return React.createElement(Option, {\n          key: index,\n          value: data._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, data.name);\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"S\\u1EEDa \"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Form, {\n        labelCol: {\n          span: 6\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"T\\xEAn s\\xE1ch\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangeName,\n        value: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), name === '' && React.createElement(\"span\", {\n        style: {\n          marginLeft: '12vw',\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Name is required\"), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Ti\\xEAu \\u0111\\u1EC1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangeTitle,\n        value: title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"\\u1EA2nh\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangeImage,\n        value: image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Gi\\xE1 b\\xE1n\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangePrice,\n        value: price,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), price === '' && React.createElement(\"span\", {\n        style: {\n          marginLeft: '12vw',\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Price is required\"), price !== '' && !_validnumber(price) && React.createElement(\"span\", {\n        style: {\n          marginLeft: '12vw',\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Price is number\"), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"S\\u1ED1 l\\u01B0\\u1EE3ng\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangeQuantity,\n        value: quantity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), quantity === '' && React.createElement(\"span\", {\n        style: {\n          marginLeft: '12vw',\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Quantity is required\"), quantity !== '' && !_validnumber(quantity) && React.createElement(\"span\", {\n        style: {\n          marginLeft: '12vw',\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Quantity is number\"), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Danh m\\u1EE5c\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Select, {\n        style: {\n          width: '30vw'\n        },\n        showSearch: true,\n        placeholder: \"Ch\\u1ECDn danh m\\u1EE5c s\\xE1ch\",\n        optionFilterProp: \"children\",\n        value: bookList,\n        onChange: this.handleChangeBookList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, categoryList)), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Ghi ch\\xFA\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(TextArea, {\n        className: \"input\",\n        onChange: this.handleChangeComment,\n        value: comment,\n        rows: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Tr\\u1EA1ng th\\xE1i\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Radio.Group, {\n        onChange: this.handleChangeStatus,\n        value: status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Radio, {\n        value: \"active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Active\"), React.createElement(Radio, {\n        value: \"deactive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Deactive\")))), React.createElement(Col, {\n        span: 21,\n        style: styles.colButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleSubmit,\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Button, {\n        onClick: this.handleCancel,\n        style: styles.btnCancel,\n        type: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return EditBook;\n}(React.Component);\n\nexport { EditBook as default };","map":{"version":3,"sources":["E:\\Save\\thayGiangGit\\FEE\\src\\components\\CMS\\Book\\EditBook\\index.js"],"names":["React","Row","Col","Avatar","Form","Input","Radio","Select","Button","Divider","moment","styles","_validnumber","url","token","TextArea","Option","EditBook","props","handleChangeName","event","setState","book","state","name","target","value","handleChangeTitle","title","handleChangeImage","image","handleChangePrice","price","handleChangeQuantity","quantity","handleChangeBookList","bookList","handleChangeStatus","status","handleChangeComment","comment","fetchCategories","fetch","method","headers","then","response","json","data","categories","console","log","fetchSelectedBook","selectedBook","history","location","_id","handleCancel","push","handleSubmit","body","JSON","stringify","alert","categoryList","map","index","span","info","marginLeft","color","width","colButton","btnCancel","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Avatar, Form, Input, Radio, Select, Button, Divider } from \"antd\";\r\nimport moment from 'moment';\r\nimport \"antd/dist/antd.css\";\r\nimport styles from './styles';\r\nimport { _validnumber } from '../../../helpers/index';\r\nimport { url } from '../../../../API/url'\r\nimport { token } from '../../../../API/token'\r\nimport \"./styles.css\";\r\n\r\nconst { TextArea } = Input;\r\nconst { Option } = Select;\r\n\r\nexport default class EditBook extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            book: {\r\n                name: \"\",\r\n                title: \"\",\r\n                image: \"\",\r\n                price: \"\",\r\n                status: \"\",\r\n                quantity: \"\",\r\n                comment: \"\",\r\n                bookList: []\r\n            },\r\n            categories: []\r\n        };\r\n    }\r\n\r\n    handleChangeName = (event) => { this.setState({ book: { ...this.state.book, name: event.target.value } }) }\r\n    handleChangeTitle = (event) => { this.setState({ book: { ...this.state.book, title: event.target.value } }) }\r\n    handleChangeImage = (event) => { this.setState({ book: { ...this.state.book, image: event.target.value } }) }\r\n    handleChangePrice = (event) => { this.setState({ book: { ...this.state.book, price: event.target.value } }) }\r\n    handleChangeQuantity = (event) => { this.setState({ book: { ...this.state.book, quantity: event.target.value } }) }\r\n    handleChangeBookList = (value) => { this.setState({ book: { ...this.state.book, bookList: value } }) }\r\n    handleChangeStatus = (event) => { this.setState({ book: { ...this.state.book, status: event.target.value } }) }\r\n    handleChangeComment = (event) => { this.setState({ book: { ...this.state.book, comment: event.target.value } }) }\r\n\r\n    componentDidMount() {\r\n        this.fetchSelectedBook()\r\n        this.fetchCategories()\r\n    }\r\n\r\n\r\n    //mapping categories to input select\r\n    fetchCategories = () => {\r\n        fetch(url + 'categories', {\r\n            method: 'get',\r\n            headers: {\r\n                \"Authorization\": token,\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => (\r\n                this.setState({\r\n                    categories: data.data,\r\n                }),\r\n                console.log('get category API ', this.state.categories)\r\n            ))\r\n    }\r\n\r\n\r\n    //mapping current data to input\r\n    fetchSelectedBook = () => {\r\n        const selectedBook = this.props.history.location.state.props.selectedBook\r\n        console.log('selectedBook', selectedBook)\r\n        this.setState({\r\n            book: {\r\n                name: selectedBook.name,\r\n                title: selectedBook.title,\r\n                image: selectedBook.image,\r\n                price: selectedBook.price,\r\n                status: selectedBook.status,\r\n                quantity: selectedBook.quantity,\r\n                comment: selectedBook.comment,\r\n                bookList: selectedBook.bookList[0]._id\r\n            }\r\n        })\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.props.history.push('/books')\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        const { book } = this.state\r\n        const selectedBook = this.props.history.location.state.props.selectedBook\r\n        if (book.name !== '') {\r\n            fetch(url + 'books/' + selectedBook._id, {\r\n                method: 'put',\r\n                body: JSON.stringify(book),\r\n                headers: {\r\n                    \"Authorization\": token,\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            })\r\n                .then(response => {\r\n                    response.json()\r\n                    if (response.status == 200) {\r\n                        alert('Sửa thành công')\r\n                        this.props.history.push('/books')\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            alert('Vui lòng nhập đầy đủ thông tin')\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { categories, book: { name, title, image, price, status, quantity, comment, bookList } } = this.state\r\n        const categoryList = categories.map((data, index) => {\r\n            return <Option key={index} value={data._id}>{data.name}</Option>\r\n        })\r\n        return (\r\n            <div>\r\n                <h2>Sửa </h2>\r\n                <Divider></Divider>\r\n                <Row>\r\n                    <Col span={6}>\r\n\r\n                    </Col>\r\n                    <Col span={12}>\r\n                        <Form labelCol={{ span: 6 }}>\r\n                            <Form.Item style={styles.info} label=\"Tên sách\">\r\n                                <Input className=\"input\" onChange={this.handleChangeName} value={name} />\r\n                            </Form.Item>\r\n                            {name === '' && <span style={{ marginLeft: '12vw', color: 'red' }}>Name is required</span>}\r\n                            <Form.Item style={styles.info} label=\"Tiêu đề\">\r\n                                <Input className=\"input\" onChange={this.handleChangeTitle} value={title} />\r\n                            </Form.Item>\r\n                            <Form.Item style={styles.info} label=\"Ảnh\">\r\n                                <Input className=\"input\" onChange={this.handleChangeImage} value={image} />\r\n                            </Form.Item>\r\n                            <Form.Item style={styles.info} label=\"Giá bán\">\r\n                                <Input className=\"input\" onChange={this.handleChangePrice} value={price} />\r\n                            </Form.Item>\r\n                            {price === '' && <span style={{ marginLeft: '12vw', color: 'red' }}>Price is required</span>}\r\n                            {price !== '' && !_validnumber(price) && <span style={{ marginLeft: '12vw', color: 'red' }}>Price is number</span>}\r\n                            <Form.Item style={styles.info} label=\"Số lượng\">\r\n                                <Input className=\"input\" onChange={this.handleChangeQuantity} value={quantity} />\r\n                            </Form.Item>\r\n                            {quantity === '' && <span style={{ marginLeft: '12vw', color: 'red' }}>Quantity is required</span>}\r\n                            {quantity !== '' && !_validnumber(quantity) && <span style={{ marginLeft: '12vw', color: 'red' }}>Quantity is number</span>}\r\n                            <Form.Item style={styles.info} label=\"Danh mục\">\r\n                                <Select\r\n                                    style={{ width: '30vw' }}\r\n                                    showSearch\r\n                                    placeholder=\"Chọn danh mục sách\"\r\n                                    optionFilterProp=\"children\"\r\n                                    value={bookList}\r\n                                    onChange={this.handleChangeBookList}\r\n                                >\r\n                                    {categoryList}\r\n                                </Select>\r\n                            </Form.Item>\r\n                            <Form.Item style={styles.info} label=\"Ghi chú\">\r\n                                <TextArea className=\"input\" onChange={this.handleChangeComment} value={comment} rows={4} />\r\n                            </Form.Item>\r\n                            <Form.Item style={styles.info} label=\"Trạng thái\">\r\n                                <Radio.Group onChange={this.handleChangeStatus} value={status}>\r\n                                    <Radio value=\"active\">Active</Radio>\r\n                                    <Radio value=\"deactive\">Deactive</Radio>\r\n                                </Radio.Group>\r\n                            </Form.Item>\r\n                        </Form>\r\n                        <Col span={21} style={styles.colButton}>\r\n                            <Button onClick={this.handleSubmit} type=\"primary\">Save</Button>\r\n                            <Button onClick={this.handleCancel} style={styles.btnCancel} type=\"danger\">Cancel</Button>\r\n                        </Col>\r\n                    </Col>\r\n                </Row>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}