{"ast":null,"code":"import _classCallCheck from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\Save\\\\thayGiangGit\\\\fee\\\\src\\\\components\\\\CMS\\\\Book\\\\index.js\";\nimport React from \"react\";\nimport { Table, Button, Icon, Input, Modal } from 'antd';\nimport \"antd/dist/antd.css\";\nimport styles from './styles';\nimport { token } from '../../../API/token';\nimport { url } from '../../../API/url';\nimport ReactExport from \"react-export-excel\";\nvar ExcelFile = ReactExport.ExcelFile;\nvar ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\nvar ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\n\nvar Book =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Book, _React$Component);\n\n  function Book(props) {\n    var _this;\n\n    _classCallCheck(this, Book);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Book).call(this, props));\n    _this.columns = [{\n      title: 'Tên sách',\n      dataIndex: 'name',\n      key: 'name'\n    }, {\n      title: 'Tiêu đề',\n      dataIndex: 'title',\n      key: 'title'\n    }, {\n      title: 'Tên loại sách',\n      dataIndex: 'bookList[0].name',\n      key: 'bookList'\n    }, {\n      title: 'Giá bán',\n      dataIndex: 'price',\n      key: 'price',\n      render: function render(text, data) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, data.price.concat(\".000 đ\"));\n      }\n    }, {\n      title: 'Số lượng',\n      dataIndex: 'quantity',\n      key: 'quantity',\n      width: '10%'\n    }, {\n      title: 'Trạng thái',\n      dataIndex: 'status',\n      width: '8%',\n      render: function render(text, data) {\n        return React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, data.status == \"active\" ? React.createElement(\"button\", {\n          style: styles.btnActive,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, \"Active\") : React.createElement(\"button\", {\n          style: styles.btnDeactive,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, \"Deactive\"));\n      }\n    }, {\n      title: 'Tính năng',\n      dataIndex: 'function',\n      width: '8%',\n      render: function render(text, data) {\n        return React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: function onClick() {\n            return _this.gotoEditBook(data);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          type: \"edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        })), \"|\", React.createElement(\"a\", {\n          onClick: function onClick() {\n            return _this.showModal(data._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          style: {\n            color: '#FA541C'\n          },\n          type: \"delete\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }), \" \"));\n      }\n    }];\n\n    _this.gotoAddBook = function () {\n      _this.props.history.push('/addBooks');\n    };\n\n    _this.handleChangeSearch = function (e) {\n      _this.setState({\n        searchText: e.target.value\n      });\n    };\n\n    _this.handleSubmitSearch = function () {\n      var params = {\n        \"searchText\": _this.state.searchText\n      };\n      return fetch(url + \"/books/search\", {\n        method: 'post',\n        body: JSON.stringify(params),\n        headers: {\n          \"Authorization\": token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return _this.setState({\n          books: data.data\n        }), console.log('getBookSearch API ', _this.state.books);\n      });\n    };\n\n    _this.gotoEditBook = function (selectedBook) {\n      console.log('selectedBook', selectedBook);\n\n      _this.props.history.push({\n        pathname: '/editBooks',\n        state: {\n          props: {\n            selectedBook: selectedBook\n          }\n        }\n      });\n    };\n\n    _this.fetchData = function () {\n      fetch(url + 'books', {\n        method: 'get',\n        headers: {\n          \"Authorization\": token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        return data.data.forEach(function (x) {\n          x.categoryName = x.bookList[0].name;\n        }), _this.setState({\n          books: data.data\n        }), console.log('getBook API ', _this.state.books);\n      });\n    };\n\n    _this._bookId = '';\n\n    _this.showModal = function (bookId) {\n      _this._bookId = bookId;\n\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleDelete = function (bookId) {\n      var params = {\n        \"_id\": _this._bookId\n      };\n      return fetch(url + \"books/\" + _this._bookId, {\n        method: 'delete',\n        body: JSON.stringify(params),\n        headers: {\n          \"Authorization\": token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(_this.setState({\n        visible: false\n      })).then(_this.fetchData());\n    };\n\n    _this.handlemodalCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.state = {\n      searchText: '',\n      books: [],\n      visible: false\n    };\n    return _this;\n  }\n\n  _createClass(Book, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          searchText = _this$state.searchText,\n          books = _this$state.books;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"BOOK LIST\")), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          marginBottom: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          marginRight: '10px'\n        },\n        onClick: this.gotoAddBook,\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Th\\xEAm M\\u1EDBi\"), React.createElement(ExcelFile, {\n        filename: \"excelBook\",\n        element: React.createElement(Button, {\n          type: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, \"Xu\\u1EA5t file excel\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(ExcelSheet, {\n        data: books,\n        name: \"Book\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(ExcelColumn, {\n        label: \"Id\",\n        value: \"_id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(ExcelColumn, {\n        label: \"T\\xEAn s\\xE1ch\",\n        value: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), React.createElement(ExcelColumn, {\n        label: \"Ti\\xEAu \\u0111\\u1EC1\",\n        value: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(ExcelColumn, {\n        label: \"T\\xEAn lo\\u1EA1i s\\xE1ch\",\n        value: \"bookList[0].name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(ExcelColumn, {\n        label: \"Gi\\xE1 b\\xE1n\",\n        value: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), React.createElement(ExcelColumn, {\n        label: \"S\\u1ED1 l\\u01B0\\u1EE3ng\",\n        value: \"quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(ExcelColumn, {\n        label: \"Tr\\u1EA1ng th\\xE1i\",\n        value: \"status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(Input, {\n        placeholder: \"T\\xECm ki\\u1EBFm\",\n        value: searchText,\n        onChange: this.handleChangeSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(Button, {\n        onClick: this.handleSubmitSearch,\n        style: {\n          marginLeft: '5px'\n        },\n        type: \"primary\",\n        shape: \"circle\",\n        icon: \"search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Table, {\n        bordered: true,\n        columns: this.columns,\n        dataSource: books,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        title: \"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a kh\\xF4ng?\",\n        visible: this.state.visible,\n        onOk: this.handleDelete,\n        onCancel: this.handlemodalCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Book;\n}(React.Component);\n\nexport { Book as default };","map":{"version":3,"sources":["E:\\Save\\thayGiangGit\\fee\\src\\components\\CMS\\Book\\index.js"],"names":["React","Table","Button","Icon","Input","Modal","styles","token","url","ReactExport","ExcelFile","ExcelSheet","ExcelColumn","Book","props","columns","title","dataIndex","key","render","text","data","price","concat","width","display","justifyContent","status","btnActive","btnDeactive","gotoEditBook","showModal","_id","color","gotoAddBook","history","push","handleChangeSearch","e","setState","searchText","target","value","handleSubmitSearch","params","state","fetch","method","body","JSON","stringify","headers","then","res","json","books","console","log","selectedBook","pathname","fetchData","response","forEach","x","categoryName","bookList","name","_bookId","bookId","visible","handleDelete","handlemodalCancel","textAlign","alignItems","marginBottom","marginRight","flexDirection","marginLeft","Component"],"mappings":";;;;;;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,IAAxB,EAA8BC,KAA9B,EAAqCC,KAArC,QAAkD,MAAlD;AACA,OAAO,oBAAP;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,KAAT,QAAsB,oBAAtB;AACA,SAASC,GAAT,QAAoB,kBAApB;AAEA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,IAAMC,SAAS,GAAGD,WAAW,CAACC,SAA9B;AACA,IAAMC,UAAU,GAAGF,WAAW,CAACC,SAAZ,CAAsBC,UAAzC;AACA,IAAMC,WAAW,GAAGH,WAAW,CAACC,SAAZ,CAAsBE,WAA1C;;IAEqBC,I;;;;;AACjB,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8EAAMA,KAAN;AADe,UAUnBC,OAVmB,GAUT,CACN;AACIC,MAAAA,KAAK,EAAE,UADX;AAEIC,MAAAA,SAAS,EAAE,MAFf;AAGIC,MAAAA,GAAG,EAAE;AAHT,KADM,EAMN;AACIF,MAAAA,KAAK,EAAE,SADX;AAEIC,MAAAA,SAAS,EAAE,OAFf;AAGIC,MAAAA,GAAG,EAAE;AAHT,KANM,EAWN;AACIF,MAAAA,KAAK,EAAE,eADX;AAEIC,MAAAA,SAAS,EAAE,kBAFf;AAGIC,MAAAA,GAAG,EAAE;AAHT,KAXM,EAgBN;AACIF,MAAAA,KAAK,EAAE,SADX;AAEIC,MAAAA,SAAS,EAAE,OAFf;AAGIC,MAAAA,GAAG,EAAE,OAHT;AAIIC,MAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,IAAP;AAAA,eACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKA,IAAI,CAACC,KAAL,CAAWC,MAAX,CAAkB,QAAlB,CADL,CADI;AAAA;AAJZ,KAhBM,EA0BN;AACIP,MAAAA,KAAK,EAAE,UADX;AAEIC,MAAAA,SAAS,EAAE,UAFf;AAGIC,MAAAA,GAAG,EAAE,UAHT;AAIIM,MAAAA,KAAK,EAAE;AAJX,KA1BM,EAgCN;AACIR,MAAAA,KAAK,EAAE,YADX;AAEIC,MAAAA,SAAS,EAAE,QAFf;AAGIO,MAAAA,KAAK,EAAE,IAHX;AAIIL,MAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,IAAP;AAAA,eACJ;AAAK,UAAA,KAAK,EAAE;AAAEI,YAAAA,OAAO,EAAE,MAAX;AAAmBC,YAAAA,cAAc,EAAE;AAAnC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKL,IAAI,CAACM,MAAL,IAAe,QAAf,GAA0B;AAAQ,UAAA,KAAK,EAAErB,MAAM,CAACsB,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA1B,GAA6E;AAAQ,UAAA,KAAK,EAAEtB,MAAM,CAACuB,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADlF,CADI;AAAA;AAJZ,KAhCM,EA2CN;AACIb,MAAAA,KAAK,EAAE,WADX;AAEIC,MAAAA,SAAS,EAAE,UAFf;AAGIO,MAAAA,KAAK,EAAE,IAHX;AAIIL,MAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,IAAP;AAAA,eACJ;AAAK,UAAA,KAAK,EAAE;AAAEI,YAAAA,OAAO,EAAE,MAAX;AAAmBC,YAAAA,cAAc,EAAE;AAAnC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAG,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAKI,YAAL,CAAkBT,IAAlB,CAAN;AAAA,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA2C,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA3C,CADJ,OAEI;AAAG,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAKU,SAAL,CAAeV,IAAI,CAACW,GAApB,CAAN;AAAA,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA4C,oBAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAb;AAAmC,UAAA,IAAI,EAAC,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA5C,MAFJ,CADI;AAAA;AAJZ,KA3CM,CAVS;;AAAA,UAsEnBC,WAtEmB,GAsEL,YAAM;AAChB,YAAKpB,KAAL,CAAWqB,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB;AACH,KAxEkB;;AAAA,UA0EnBC,kBA1EmB,GA0EE,UAAAC,CAAC,EAAI;AACtB,YAAKC,QAAL,CAAc;AACVC,QAAAA,UAAU,EAAEF,CAAC,CAACG,MAAF,CAASC;AADX,OAAd;AAGH,KA9EkB;;AAAA,UAgFnBC,kBAhFmB,GAgFE,YAAM;AACvB,UAAIC,MAAM,GAAG;AACT,sBAAc,MAAKC,KAAL,CAAWL;AADhB,OAAb;AAIA,aAAOM,KAAK,CAACtC,GAAG,GAAG,eAAP,EAAwB;AAChCuC,QAAAA,MAAM,EAAE,MADwB;AAEhCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,MAAf,CAF0B;AAGhCO,QAAAA,OAAO,EAAE;AACL,2BAAiB5C,KADZ;AAEL,0BAAgB;AAFX;AAHuB,OAAxB,CAAL,CAQF6C,IARE,CAQG,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OARN,EASFF,IATE,CASG,UAAA/B,IAAI;AAAA,eACN,MAAKkB,QAAL,CAAc;AACVgB,UAAAA,KAAK,EAAElC,IAAI,CAACA;AADF,SAAd,GAGAmC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC,MAAKZ,KAAL,CAAWU,KAA7C,CAJM;AAAA,OATP,CAAP;AAeH,KApGkB;;AAAA,UAuGnBzB,YAvGmB,GAuGJ,UAAC4B,YAAD,EAAkB;AAC7BF,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BC,YAA5B;;AAEA,YAAK5C,KAAL,CAAWqB,OAAX,CAAmBC,IAAnB,CAAwB;AACpBuB,QAAAA,QAAQ,EAAE,YADU;AAEpBd,QAAAA,KAAK,EAAE;AACH/B,UAAAA,KAAK,EAAE;AAAE4C,YAAAA,YAAY,EAAEA;AAAhB;AADJ;AAFa,OAAxB;AAMH,KAhHkB;;AAAA,UAkHnBE,SAlHmB,GAkHP,YAAM;AACdd,MAAAA,KAAK,CAACtC,GAAG,GAAG,OAAP,EAAgB;AACjBuC,QAAAA,MAAM,EAAE,KADS;AAEjBI,QAAAA,OAAO,EAAE;AACL,2BAAiB5C,KADZ;AAEL,0BAAgB;AAFX;AAFQ,OAAhB,CAAL,CAOK6C,IAPL,CAOU,UAAAS,QAAQ;AAAA,eAAIA,QAAQ,CAACP,IAAT,EAAJ;AAAA,OAPlB,EAQKF,IARL,CAQU,UAAA/B,IAAI;AAAA,eACNA,IAAI,CAACA,IAAL,CAAUyC,OAAV,CAAkB,UAAAC,CAAC,EAAI;AACnBA,UAAAA,CAAC,CAACC,YAAF,GAAiBD,CAAC,CAACE,QAAF,CAAW,CAAX,EAAcC,IAA/B;AACH,SAFD,GAGA,MAAK3B,QAAL,CAAc;AACVgB,UAAAA,KAAK,EAAElC,IAAI,CAACA;AADF,SAAd,CAHA,EAMAmC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B,MAAKZ,KAAL,CAAWU,KAAvC,CAPM;AAAA,OARd;AAiBH,KApIkB;;AAAA,UAsInBY,OAtImB,GAsIT,EAtIS;;AAAA,UAuInBpC,SAvImB,GAuIP,UAACqC,MAAD,EAAY;AACpB,YAAKD,OAAL,GAAeC,MAAf;;AACA,YAAK7B,QAAL,CAAc;AACV8B,QAAAA,OAAO,EAAE;AADC,OAAd;AAGH,KA5IkB;;AAAA,UA8InBC,YA9ImB,GA8IJ,UAACF,MAAD,EAAY;AACvB,UAAIxB,MAAM,GAAG;AACT,eAAO,MAAKuB;AADH,OAAb;AAGA,aAAOrB,KAAK,CAACtC,GAAG,GAAG,QAAN,GAAiB,MAAK2D,OAAvB,EAAgC;AACxCpB,QAAAA,MAAM,EAAE,QADgC;AAExCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,MAAf,CAFkC;AAGxCO,QAAAA,OAAO,EAAE;AACL,2BAAiB5C,KADZ;AAEL,0BAAgB;AAFX;AAH+B,OAAhC,CAAL,CAQF6C,IARE,CAQG,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OARN,EASFF,IATE,CASG,MAAKb,QAAL,CAAc;AAChB8B,QAAAA,OAAO,EAAE;AADO,OAAd,CATH,EAYFjB,IAZE,CAYG,MAAKQ,SAAL,EAZH,CAAP;AAaH,KA/JkB;;AAAA,UAiKnBW,iBAjKmB,GAiKC,UAAAjC,CAAC,EAAI;AACrB,YAAKC,QAAL,CAAc;AACV8B,QAAAA,OAAO,EAAE;AADC,OAAd;AAGH,KArKkB;;AAGf,UAAKxB,KAAL,GAAa;AACTL,MAAAA,UAAU,EAAE,EADH;AAETe,MAAAA,KAAK,EAAE,EAFE;AAGTc,MAAAA,OAAO,EAAE;AAHA,KAAb;AAHe;AAQlB;;;;wCA0DmB;AAChB,WAAKT,SAAL;AACH;;;6BAmGQ;AAAA,wBACyB,KAAKf,KAD9B;AAAA,UACGL,UADH,eACGA,UADH;AAAA,UACee,KADf,eACeA,KADf;AAEL,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,KAAK,EAAE;AAAEiB,UAAAA,SAAS,EAAE;AAAb,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,CADJ,EAII;AAAK,QAAA,KAAK,EAAE;AAAE/C,UAAAA,OAAO,EAAE,MAAX;AAAmBgD,UAAAA,UAAU,EAAE,QAA/B;AAAyC/C,UAAAA,cAAc,EAAE,eAAzD;AAA0EgD,UAAAA,YAAY,EAAE;AAAxF,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAAEC,UAAAA,WAAW,EAAE;AAAf,SAAf;AAAwC,QAAA,OAAO,EAAE,KAAKzC,WAAtD;AAAmE,QAAA,IAAI,EAAC,SAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EAEI,oBAAC,SAAD;AAAW,QAAA,QAAQ,EAAC,WAApB;AAAgC,QAAA,OAAO,EAAE,oBAAC,MAAD;AAAQ,UAAA,IAAI,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,UAAD;AAAY,QAAA,IAAI,EAAEqB,KAAlB;AAAyB,QAAA,IAAI,EAAC,MAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,IAAnB;AAAwB,QAAA,KAAK,EAAC,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,gBAAnB;AAA8B,QAAA,KAAK,EAAC,MAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGI,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,sBAAnB;AAA6B,QAAA,KAAK,EAAC,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ,EAII,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,0BAAnB;AAAmC,QAAA,KAAK,EAAC,kBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,EAKI,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,eAAnB;AAA6B,QAAA,KAAK,EAAC,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALJ,EAMI,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,yBAAnB;AAA8B,QAAA,KAAK,EAAC,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANJ,EAOI,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAC,oBAAnB;AAAgC,QAAA,KAAK,EAAC,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,CADJ,CAFJ,CADJ,EAeI;AAAK,QAAA,KAAK,EAAE;AAAE9B,UAAAA,OAAO,EAAE,MAAX;AAAmBmD,UAAAA,aAAa,EAAE;AAAlC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,kBAAnB;AAA8B,QAAA,KAAK,EAAEpC,UAArC;AAAiD,QAAA,QAAQ,EAAE,KAAKH,kBAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKM,kBAAtB;AAA0C,QAAA,KAAK,EAAE;AAAEkC,UAAAA,UAAU,EAAE;AAAd,SAAjD;AAAwE,QAAA,IAAI,EAAC,SAA7E;AAAuF,QAAA,KAAK,EAAC,QAA7F;AAAsG,QAAA,IAAI,EAAC,QAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAfJ,CAJJ,EAwBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAO,QAAA,QAAQ,MAAf;AAAgB,QAAA,OAAO,EAAE,KAAK9D,OAA9B;AAAuC,QAAA,UAAU,EAAEwC,KAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAxBJ,EA4BI,oBAAC,KAAD;AACI,QAAA,KAAK,EAAC,+DADV;AAEI,QAAA,OAAO,EAAE,KAAKV,KAAL,CAAWwB,OAFxB;AAGI,QAAA,IAAI,EAAE,KAAKC,YAHf;AAII,QAAA,QAAQ,EAAE,KAAKC,iBAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA5BJ,CADJ;AAsCH;;;;EAhN6BvE,KAAK,CAAC8E,S;;SAAnBjE,I","sourcesContent":["\r\n\r\nimport React from \"react\";\r\nimport { Table, Button, Icon, Input, Modal } from 'antd';\r\nimport \"antd/dist/antd.css\";\r\nimport styles from './styles'\r\nimport { token } from '../../../API/token'\r\nimport { url } from '../../../API/url'\r\n\r\nimport ReactExport from \"react-export-excel\";\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default class Book extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            searchText: '',\r\n            books: [],\r\n            visible: false\r\n        }\r\n    }\r\n\r\n    columns = [\r\n        {\r\n            title: 'Tên sách',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: 'Tiêu đề',\r\n            dataIndex: 'title',\r\n            key: 'title',\r\n        },\r\n        {\r\n            title: 'Tên loại sách',\r\n            dataIndex: 'bookList[0].name',\r\n            key: 'bookList',\r\n        },\r\n        {\r\n            title: 'Giá bán',\r\n            dataIndex: 'price',\r\n            key: 'price',\r\n            render: (text, data) => (\r\n                <div>\r\n                    {data.price.concat(\".000 đ\")}\r\n                </div>\r\n            ),\r\n        },\r\n        {\r\n            title: 'Số lượng',\r\n            dataIndex: 'quantity',\r\n            key: 'quantity',\r\n            width: '10%'\r\n        },\r\n        {\r\n            title: 'Trạng thái',\r\n            dataIndex: 'status',\r\n            width: '8%',\r\n            render: (text, data) => (\r\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                    {data.status == \"active\" ? <button style={styles.btnActive}>Active</button> : <button style={styles.btnDeactive}>Deactive</button>}\r\n                </div>\r\n\r\n            ),\r\n        },\r\n        {\r\n            title: 'Tính năng',\r\n            dataIndex: 'function',\r\n            width: '8%',\r\n            render: (text, data) => (\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <a onClick={() => this.gotoEditBook(data)}><Icon type=\"edit\" /></a>|\r\n                    <a onClick={() => this.showModal(data._id)}><Icon style={{ color: '#FA541C' }} type=\"delete\" /> </a>\r\n                </div>\r\n            )\r\n        }\r\n    ];\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    gotoAddBook = () => {\r\n        this.props.history.push('/addBooks')\r\n    }\r\n\r\n    handleChangeSearch = e => {\r\n        this.setState({\r\n            searchText: e.target.value\r\n        });\r\n    }\r\n\r\n    handleSubmitSearch = () => {\r\n        let params = {\r\n            \"searchText\": this.state.searchText\r\n        }\r\n\r\n        return fetch(url + \"/books/search\", {\r\n            method: 'post',\r\n            body: JSON.stringify(params),\r\n            headers: {\r\n                \"Authorization\": token,\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => (\r\n                this.setState({\r\n                    books: data.data,\r\n                }),\r\n                console.log('getBookSearch API ', this.state.books)\r\n            ))\r\n    }\r\n\r\n\r\n    gotoEditBook = (selectedBook) => {\r\n        console.log('selectedBook', selectedBook)\r\n\r\n        this.props.history.push({\r\n            pathname: '/editBooks',\r\n            state: {\r\n                props: { selectedBook: selectedBook}\r\n            }\r\n        });\r\n    }\r\n\r\n    fetchData = () => {\r\n        fetch(url + 'books', {\r\n            method: 'get',\r\n            headers: {\r\n                \"Authorization\": token,\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => (\r\n                data.data.forEach(x => {\r\n                    x.categoryName = x.bookList[0].name\r\n                }),\r\n                this.setState({\r\n                    books: data.data,\r\n                }),\r\n                console.log('getBook API ', this.state.books)\r\n            ))\r\n    }\r\n\r\n    _bookId = ''\r\n    showModal = (bookId) => {\r\n        this._bookId = bookId\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    handleDelete = (bookId) => {\r\n        let params = {\r\n            \"_id\": this._bookId\r\n        }\r\n        return fetch(url + \"books/\" + this._bookId, {\r\n            method: 'delete',\r\n            body: JSON.stringify(params),\r\n            headers: {\r\n                \"Authorization\": token,\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(this.setState({\r\n                visible: false\r\n            }))\r\n            .then(this.fetchData())\r\n    };\r\n\r\n    handlemodalCancel = e => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const { searchText, books } = this.state\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <h1 style={{ textAlign: 'center' }}>BOOK LIST</h1>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '5px' }}>\r\n                    <div>\r\n                        <Button style={{ marginRight: '10px' }} onClick={this.gotoAddBook} type=\"primary\">Thêm Mới</Button>\r\n                        <ExcelFile filename=\"excelBook\" element={<Button type=\"primary\">Xuất file excel</Button>}> \r\n                            <ExcelSheet data={books} name=\"Book\" >\r\n                                <ExcelColumn label=\"Id\" value=\"_id\"/>\r\n                                <ExcelColumn label=\"Tên sách\" value=\"name\" />\r\n                                <ExcelColumn label=\"Tiêu đề\" value=\"title\" />\r\n                                <ExcelColumn label=\"Tên loại sách\" value=\"bookList[0].name\" />\r\n                                <ExcelColumn label=\"Giá bán\" value=\"price\" />\r\n                                <ExcelColumn label=\"Số lượng\" value=\"quantity\" />\r\n                                <ExcelColumn label=\"Trạng thái\" value=\"status\" />\r\n                            </ExcelSheet>\r\n                        </ExcelFile>\r\n                    </div>\r\n                    <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                        <Input placeholder=\"Tìm kiếm\" value={searchText} onChange={this.handleChangeSearch} />\r\n                        <Button onClick={this.handleSubmitSearch} style={{ marginLeft: '5px' }} type=\"primary\" shape=\"circle\" icon=\"search\" />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <Table bordered columns={this.columns} dataSource={books} />\r\n                </div>\r\n\r\n                <Modal\r\n                    title=\"Bạn có chắc chắn muốn xóa không?\"\r\n                    visible={this.state.visible}\r\n                    onOk={this.handleDelete}\r\n                    onCancel={this.handlemodalCancel}\r\n                >\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}