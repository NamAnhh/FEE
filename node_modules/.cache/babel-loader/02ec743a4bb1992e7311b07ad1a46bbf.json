{"ast":null,"code":"import _classCallCheck from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Save\\\\thayGiangGit\\\\FEE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\Save\\\\thayGiangGit\\\\fee\\\\src\\\\components\\\\ClientSides\\\\Login\\\\index.js\";\nimport React from \"react\";\nimport { Row, Col, Avatar, Form, Input, Radio, Select, Button, Divider } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport { token } from '../../../API/token';\nimport { url } from '../../../API/url';\nimport styles from './styles';\nimport \"./styles.css\";\nimport GoogleLogin from 'react-google-login';\nimport { GoogleLogout } from 'react-google-login'; // import FacebookLogin from 'react-facebook-login';\n\nimport { FacebookProvider, LoginButton } from 'react-facebook';\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this._bookId = '';\n\n    _this.showModal = function (bookId) {\n      _this._bookId = bookId;\n\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handlemodalCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.responseGoogle = function (response) {\n      console.log(response);\n\n      if (!response.error) {\n        var params = {\n          \"user\": {\n            \"email\": response.profileObj.email\n          }\n        };\n        return fetch(url + \"users/loginSocial\", {\n          method: 'post',\n          body: JSON.stringify(params),\n          headers: {\n            // \"Authorization\": token,\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(alert(\"Đăng nhập thành công\")).then(localStorage.setItem(\"loginGoogle\", JSON.stringify(response.profileObj))).then(_this.props.history.push(\"/\"));\n      }\n    };\n\n    _this.handleSendMail = function () {\n      var params = {\n        \"user\": {\n          \"username\": \"namanh511\",\n          \"email\": \"namanhng2605@gmail.com\",\n          \"password\": \"1\"\n        }\n      };\n      return fetch(url + \"users\", {\n        method: 'post',\n        body: JSON.stringify(params),\n        headers: {\n          \"Authorization\": token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        return console.log(\"res\", res);\n      });\n    };\n\n    _this.handleRegister = function () {\n      _this.props.history.push(\"/register\");\n    };\n\n    _this.handleError = function (error) {\n      _this.setState({\n        error: error\n      });\n    };\n\n    _this.state = {\n      visible: false\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      localStorage.removeItem(\"loginGoogle\");\n      localStorage.removeItem(\"loginFacebook\");\n    } //show modal\n\n  }, {\n    key: \"responseFacebook\",\n    value: function responseFacebook(response) {\n      console.log(response);\n\n      if (response) {\n        var params = {\n          \"user\": {\n            \"email\": response.profile.email\n          }\n        };\n        return fetch(url + \"users/loginSocial\", {\n          method: 'post',\n          body: JSON.stringify(params),\n          headers: {\n            // \"Authorization\": token,\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(alert(\"Đăng nhập thành công\")).then(localStorage.setItem(\"loginFacebook\", JSON.stringify(response.profile))).then(this.props.history.push(\"/\"));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          searchText = _this$state.searchText,\n          books = _this$state.books;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Form, {\n        labelCol: {\n          span: 6\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangeName,\n        value: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        style: styles.info,\n        label: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"input\",\n        onChange: this.handleChangeName,\n        value: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        span: 21,\n        style: styles.colButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleSubmit,\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"\\u0110\\u0103ng nh\\u1EADp\"), React.createElement(Button, {\n        onClick: this.handleSubmit,\n        style: styles.btnCancel,\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"\\u0110\\u0103ng nh\\u1EADp google\"), React.createElement(Button, {\n        onClick: this.handleRegister,\n        style: styles.btnCancel,\n        type: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"\\u0110\\u0103ng k\\xFD\"), React.createElement(Button, {\n        onClick: this.handleSendMail,\n        style: styles.btnCancel,\n        type: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Send Mail\"), React.createElement(GoogleLogin, {\n        clientId: \"450425733304-63045qg18t40ol71eb6insc1bodh38ih.apps.googleusercontent.com\",\n        render: function render(renderProps) {\n          return React.createElement(Button, {\n            style: styles.btnCancel,\n            type: \"primary\",\n            onClick: renderProps.onClick,\n            disabled: renderProps.disabled,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, \"Login google\");\n        },\n        onSuccess: this.responseGoogle,\n        onFailure: this.responseGoogle,\n        cookiePolicy: 'single_host_origin',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(GoogleLogout, {\n        clientId: \"450425733304-63045qg18t40ol71eb6insc1bodh38ih.apps.googleusercontent.com\",\n        render: function render(renderProps) {\n          return React.createElement(Button, {\n            style: styles.btnCancel,\n            type: \"primary\",\n            onClick: renderProps.onClick,\n            disabled: renderProps.disabled,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165\n            },\n            __self: this\n          }, \"Logout google\");\n        },\n        onLogoutSuccess: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(FacebookProvider, {\n        appId: \"589858161579560\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(LoginButton, {\n        scope: \"email\",\n        onCompleted: this.responseFacebook,\n        onError: this.handleError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Login via Facebook\")))))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport { Login as default };","map":{"version":3,"sources":["E:\\Save\\thayGiangGit\\fee\\src\\components\\ClientSides\\Login\\index.js"],"names":["React","Row","Col","Avatar","Form","Input","Radio","Select","Button","Divider","token","url","styles","GoogleLogin","GoogleLogout","FacebookProvider","LoginButton","Login","props","_bookId","showModal","bookId","setState","visible","handlemodalCancel","e","responseGoogle","response","console","log","error","params","profileObj","email","fetch","method","body","JSON","stringify","headers","then","res","json","alert","localStorage","setItem","history","push","handleSendMail","handleRegister","handleError","state","removeItem","profile","searchText","books","span","info","handleChangeName","colButton","handleSubmit","btnCancel","renderProps","onClick","disabled","logout","responseFacebook","Component"],"mappings":"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","sourcesContent":["\r\n\r\nimport React from \"react\";\r\nimport { Row, Col, Avatar, Form, Input, Radio, Select, Button, Divider } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport { token } from '../../../API/token'\r\nimport { url } from '../../../API/url'\r\nimport styles from './styles';\r\nimport \"./styles.css\";\r\n\r\nimport GoogleLogin from 'react-google-login';\r\nimport { GoogleLogout } from 'react-google-login';\r\n// import FacebookLogin from 'react-facebook-login';\r\nimport { FacebookProvider, LoginButton } from 'react-facebook';\r\n\r\nexport default class Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            visible: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        localStorage.removeItem(\"loginGoogle\");\r\n        localStorage.removeItem(\"loginFacebook\");\r\n    }\r\n\r\n    //show modal\r\n    _bookId = ''\r\n    showModal = (bookId) => {\r\n        this._bookId = bookId\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    //modal btn cancel\r\n    handlemodalCancel = e => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n\r\n    //login google\r\n    responseGoogle = (response) => {\r\n        console.log(response);\r\n        if (!response.error) {\r\n            let params = {\r\n                \"user\": {\r\n                    \"email\": response.profileObj.email,\r\n                }\r\n            }\r\n\r\n            return fetch(url + \"users/loginSocial\", {\r\n                method: 'post',\r\n                body: JSON.stringify(params),\r\n                headers: {\r\n                    // \"Authorization\": token,\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            })\r\n                .then(res => res.json())\r\n                .then(alert(\"Đăng nhập thành công\"))\r\n                .then(localStorage.setItem(\"loginGoogle\", JSON.stringify(response.profileObj)))\r\n                .then(this.props.history.push(\"/\"))\r\n        }\r\n    }\r\n\r\n    //send email\r\n    handleSendMail = () => {\r\n        let params = {\r\n            \"user\": {\r\n                \"username\": \"namanh511\",\r\n                \"email\": \"namanhng2605@gmail.com\",\r\n                \"password\": \"1\"\r\n            }\r\n\r\n        }\r\n\r\n        return fetch(url + \"users\", {\r\n            method: 'post',\r\n            body: JSON.stringify(params),\r\n            headers: {\r\n                \"Authorization\": token,\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => console.log(\"res\", res))\r\n    }\r\n\r\n    //go to register\r\n    handleRegister = () => {\r\n        this.props.history.push(\"/register\")\r\n    }\r\n\r\n    handleError = (error) => {\r\n        this.setState({ error });\r\n    }\r\n\r\n    responseFacebook(response) {\r\n        console.log(response)\r\n        if (response) {\r\n            let params = {\r\n                \"user\": {\r\n                    \"email\": response.profile.email,\r\n                }\r\n            }\r\n\r\n            return fetch(url + \"users/loginSocial\", {\r\n                method: 'post',\r\n                body: JSON.stringify(params),\r\n                headers: {\r\n                    // \"Authorization\": token,\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            })\r\n                .then(res => res.json())\r\n                .then(alert(\"Đăng nhập thành công\"))\r\n                .then(localStorage.setItem(\"loginFacebook\", JSON.stringify(response.profile)))\r\n                .then(this.props.history.push(\"/\"))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { searchText, books } = this.state\r\n        return (\r\n            <div>\r\n                <h2>Login</h2>\r\n                <Divider></Divider>\r\n                <Row>\r\n                    <Col span={6}>\r\n\r\n                    </Col>\r\n                    <Col span={12}>\r\n                        <Form labelCol={{ span: 6 }}>\r\n                            <Form.Item style={styles.info} label=\"Email\">\r\n                                <Input className=\"input\" onChange={this.handleChangeName} value=\"a\" />\r\n                            </Form.Item>\r\n                            {/* {name === '' && <span style={{ marginLeft: '12vw', color: 'red' }}>Name is required</span>}*/}\r\n                            <Form.Item style={styles.info} label=\"Password\">\r\n                                <Input className=\"input\" onChange={this.handleChangeName} value=\"a\" />\r\n                            </Form.Item>\r\n                            {/* {name === '' && <span style={{ marginLeft: '12vw', color: 'red' }}>Name is required</span>}*/}\r\n                        </Form>\r\n                        <Col span={21} style={styles.colButton}>\r\n                            <Button onClick={this.handleSubmit} type=\"primary\">Đăng nhập</Button>\r\n                            <Button onClick={this.handleSubmit} style={styles.btnCancel} type=\"primary\">Đăng nhập google</Button>\r\n                            <Button onClick={this.handleRegister} style={styles.btnCancel} type=\"danger\">Đăng ký</Button>\r\n                            <Button onClick={this.handleSendMail} style={styles.btnCancel} type=\"danger\">Send Mail</Button>\r\n                            <GoogleLogin\r\n                                clientId=\"450425733304-63045qg18t40ol71eb6insc1bodh38ih.apps.googleusercontent.com\"\r\n                                render={renderProps => (\r\n                                    <Button style={styles.btnCancel} type=\"primary\" onClick={renderProps.onClick} disabled={renderProps.disabled}>Login google</Button>\r\n                                )}\r\n                                onSuccess={this.responseGoogle}\r\n                                onFailure={this.responseGoogle}\r\n                                cookiePolicy={'single_host_origin'}\r\n                            />\r\n                            <GoogleLogout\r\n                                clientId=\"450425733304-63045qg18t40ol71eb6insc1bodh38ih.apps.googleusercontent.com\"\r\n                                render={renderProps => (\r\n                                    <Button style={styles.btnCancel} type=\"primary\" onClick={renderProps.onClick} disabled={renderProps.disabled}>Logout google</Button>\r\n                                )}\r\n                                onLogoutSuccess={this.logout}\r\n                            >\r\n                            </GoogleLogout>\r\n                            <FacebookProvider appId=\"589858161579560\">\r\n                                <LoginButton\r\n                                    scope=\"email\"\r\n                                    onCompleted={this.responseFacebook}\r\n                                    onError={this.handleError}\r\n                                >\r\n                                    <span>Login via Facebook</span>\r\n                                </LoginButton>\r\n                            </FacebookProvider>\r\n                        </Col>\r\n                    </Col>\r\n                </Row>\r\n            </div >\r\n\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}